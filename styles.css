/* ShadCN-like Variables */
:root {
	--background: 0 0% 100%;
	--foreground: 222.2 84% 4.9%;
	--card: 0 0% 100%;
	--card-foreground: 222.2 84% 4.9%;
	--popover: 0 0% 100%;
	--popover-foreground: 222.2 84% 4.9%;
	--primary: 222.2 47.4% 11.2%;
	--primary-foreground: 210 40% 98%;
	--secondary: 210 40% 96.1%;
	--secondary-foreground: 222.2 47.4% 11.2%;
	--muted: 210 40% 96.1%;
	--muted-foreground: 215.4 16.3% 46.9%;
	--accent: 210 40% 96.1%;
	--accent-foreground: 222.2 47.4% 11.2%;
	--destructive: 0 84.2% 60.2%;
	--destructive-foreground: 210 40% 98%;
	--border: 214.3 31.8% 91.4%;
	--input: 214.3 31.8% 91.4%;
	--ring: 222.2 84% 4.9%;
	--radius: 0.5rem;

	/* Claude Specifics */
	--claude-bg: #F5F5F0;
	--claude-user-bubble: #DDD9CE;
	--claude-user-text: #1a1a18;
	--claude-assistant-text: #1a1a18;
	--claude-input-bg: #ffffff;
	--claude-input-shadow: 0 0.25rem 1.25rem rgba(0, 0, 0, 0.035), 0 0 0 0.5px rgba(0, 0, 0, 0.08);
	--claude-input-shadow-focus: 0 0.25rem 1.25rem rgba(0, 0, 0, 0.075), 0 0 0 0.5px rgba(0, 0, 0, 0.15);
	--claude-send-btn: var(--interactive-accent);
	--claude-send-btn-hover: var(--interactive-accent-hover);
	--claude-popover-bg: #ffffff;
	--claude-popover-border: rgba(0, 0, 0, 0.08);
}

.theme-dark {
	--background: 222.2 84% 4.9%;
	--foreground: 210 40% 98%;
	--card: 222.2 84% 4.9%;
	--card-foreground: 210 40% 98%;
	--popover: 222.2 84% 4.9%;
	--popover-foreground: 210 40% 98%;
	--primary: 210 40% 98%;
	--primary-foreground: 222.2 47.4% 11.2%;
	--secondary: 217.2 32.6% 17.5%;
	--secondary-foreground: 210 40% 98%;
	--muted: 217.2 32.6% 17.5%;
	--muted-foreground: 215 20.2% 65.1%;
	--accent: 217.2 32.6% 17.5%;
	--accent-foreground: 210 40% 98%;
	--destructive: 0 62.8% 30.6%;
	--destructive-foreground: 210 40% 98%;
	--border: 217.2 32.6% 17.5%;
	--input: 217.2 32.6% 17.5%;
	--ring: 212.7 26.8% 83.9%;

	/* Claude Specifics Dark */
	--claude-bg: #2b2a27;
	--claude-user-bubble: #393937;
	--claude-user-text: #eee;
	--claude-assistant-text: #eee;
	--claude-input-bg: #1f1e1b;
	--claude-input-shadow: 0 0.25rem 1.25rem rgba(0, 0, 0, 0.4), 0 0 0 0.5px rgba(108, 106, 96, 0.15);
	--claude-input-shadow-focus: 0 0.25rem 1.25rem rgba(0, 0, 0, 0.5), 0 0 0 0.5px rgba(108, 106, 96, 0.3);
	--claude-send-btn: var(--interactive-accent);
	--claude-send-btn-hover: var(--interactive-accent-hover);
	--claude-popover-bg: #1f1e1b;
	--claude-popover-border: rgba(108, 106, 96, 0.25);
}

/* Chat Container */
.agent-chat-container {
	display: flex;
	flex-direction: column;
	height: 100%;
	background-color: var(--claude-bg);
	color: var(--foreground);
	font-family: var(--font-interface);
	position: relative;
	user-select: text;
	-webkit-user-select: text;
}

/* Messages Area */
.agent-chat-messages {
	flex: 1;
	overflow-y: auto;
	padding: 1rem;
	display: flex;
	flex-direction: column;
	gap: 1.5rem;
	/* Increased gap */
	padding-bottom: 10rem; /* Fallback, dynamically adjusted by JS */
	padding-top: 2rem;
}

.agent-message {
	display: flex;
	flex-direction: column;
	gap: 0.25rem;
	max-width: 100%;
}

.agent-message.user {
	align-self: flex-end;
	align-items: flex-end;
	max-width: 75ch;
}

.agent-message.assistant {
	align-self: flex-start;
	align-items: flex-start;
	max-width: 100%;
}

.message-content {
	line-height: 1.65;
	font-size: 1rem;
}

/* User Message Bubble */
.agent-message.user .message-content {
	background-color: var(--claude-user-bubble);
	color: var(--claude-user-text);
	padding: 0.625rem 1.5rem 0.625rem 0.625rem;
	/* py-2.5 pr-6 pl-2.5 */
	border-radius: 0.75rem;
	/* rounded-xl */
	border: none;
}

/* Assistant Message - Minimalist */
.agent-message.assistant .message-content {
	background-color: transparent;
	color: var(--claude-assistant-text);
	border: none;
	padding: 0 2rem 0 0.5rem;
	font-family: var(--font-text);
	/* Prefer serif if possible, or Obsidian's text font */
}

/* Tool Message - Compact/Minimalist */
.agent-message.tool .message-content {
	background-color: transparent;
	color: var(--claude-assistant-text);
	font-family: var(--font-monospace);
	font-size: 0.85rem;
	border: none;
	padding: 0 0.5rem;
	opacity: 0.7;
}

/* Claude Input Design */
.agent-input-wrapper {
	position: absolute;
	bottom: 1rem;
	left: 0.5rem;
	right: 0.5rem;
	width: auto;
	max-width: 100%;
	margin: 0 auto;
	z-index: 50;
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
}

@media (min-width: 768px) {
	.agent-input-wrapper {
		left: 50%;
		transform: translateX(-50%);
		width: 100%;
		max-width: 48rem;
		/* max-w-3xl */
		padding: 0 1rem;
	}
}

.agent-ai03-container {
	background-color: var(--claude-input-bg);
	border: 1px solid transparent;
	/* Border handled by shadow/ring usually, but keeping simple */
	border-radius: 0.75rem;
	/* Reduced from 1rem to avoid cutting off corners */
	overflow: hidden;
	display: flex;
	flex-direction: column;
	box-shadow: var(--claude-input-shadow);
	transition: box-shadow 0.2s;
}

.agent-ai03-container:focus-within {
	box-shadow: var(--claude-input-shadow-focus);
}

.agent-ai03-input-area {
	padding: 1.5rem 1.5rem 0.5rem 1.5rem;
	/* Increased inset */
	flex-grow: 1;
	display: flex;
	flex-direction: column;
}

.agent-ai03-textarea {
	width: 100%;
	background: transparent;
	border: none !important;
	/* Force no border */
	box-shadow: none !important;
	/* Force no shadow */
	resize: none;
	outline: none;
	font-family: inherit;
	font-size: 1rem;
	line-height: 1.5;
	color: var(--foreground);
	min-height: 1.5rem;
	max-height: 200px;
	padding: 0;
	margin: 0;
	overflow-y: hidden;
	/* Prevent scrolling, allow expansion */
}

.agent-ai03-textarea::placeholder {
	color: #9a9893;
}

.agent-ai03-footer {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 0.5rem;
	padding: 0.5rem 1.5rem 0rem 1.5rem;
	/* No bottom padding, hints handle spacing */
	/* Padding to match inset and add space from text */
}

.agent-ai03-left-actions {
	display: flex;
	align-items: center;
	gap: 0.5rem;
	flex: 1;
}

/* Action Buttons */
.agent-btn-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	height: 2rem;
	/* h-8 */
	min-width: 2rem;
	border-radius: 0.5rem;
	/* rounded-lg */
	border: 1px solid rgba(0, 0, 0, 0.08);
	/* Light border */
	background-color: transparent;
	color: #6b6a68;
	cursor: pointer;
	transition: all 0.2s;
	padding: 0 0.375rem;
}

.theme-dark .agent-btn-icon {
	border-color: rgba(108, 106, 96, 0.25);
	color: #9a9893;
}

.agent-btn-icon:hover {
	background-color: var(--claude-bg);
	color: var(--foreground);
}

.agent-model-selector {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 0.25rem;
	height: 2rem;
	padding: 0 0.625rem;
	border-radius: 0.375rem;
	font-size: 0.75rem;
	/* text-xs */
	color: var(--foreground);
	background: transparent;
	border: none;
	cursor: pointer;
	transition: background-color 0.2s;
}

.agent-model-selector:hover {
	background-color: var(--claude-bg);
}

.agent-model-name {
	font-family: var(--font-interface);
	/* Serif in Claude, but interface font here */
	font-size: 0.875rem;
	/* 14px */
}

.agent-btn-send {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	border-radius: 0.5rem;
	/* rounded-lg */
	background-color: var(--claude-send-btn);
	color: white;
	border: none;
	cursor: pointer;
	height: 2rem;
	width: 2rem;
	padding: 0;
	transition: background-color 0.2s;
}

.agent-btn-send:hover {
	background-color: var(--claude-send-btn-hover);
}

.agent-btn-send:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

/* Suggestions & Dropdowns */
.agent-suggestions,
.agent-dropdown-content {
	position: absolute;
	bottom: 100%;
	left: 0;
	margin-bottom: 0.5rem;
	background-color: var(--claude-popover-bg);
	border: 1px solid var(--claude-popover-border);
	border-radius: var(--radius);
	padding: 0.25rem;
	box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
	z-index: 60;
	min-width: 200px;
}

.agent-suggestion-item,
.agent-dropdown-item {
	padding: 0.5rem 0.75rem;
	font-size: 0.9rem;
	cursor: pointer;
	color: var(--foreground);
	border-radius: 0.25rem;
}

.agent-suggestion-item:hover,
.agent-suggestion-item.is-selected,
.agent-dropdown-item:hover {
	background-color: var(--claude-bg);
}

/* Session List */
.agent-session-list {
	display: flex;
	flex-direction: column;
	gap: 0.25rem;
	margin-top: 0.5rem;
}

.agent-session-header {
	font-size: 0.85rem;
	font-weight: 600;
	color: hsl(var(--muted-foreground));
	margin-bottom: 0.25rem;
}

.agent-session-item {
	display: flex;
	align-items: center;
	padding: 0.5rem;
	background-color: var(--claude-popover-bg);
	border: 1px solid var(--claude-popover-border);
	border-radius: var(--radius);
	cursor: pointer;
	transition: background-color 0.2s ease;
	font-size: 0.9rem;
}

.agent-session-item:hover {
	background-color: var(--claude-bg);
}

/* Plan Card */
.agent-plan-card {
	background-color: var(--claude-popover-bg);
	/* Solid background */
	border: 1px solid var(--claude-popover-border);
	border-radius: var(--radius);
	margin-bottom: 0.5rem;
	overflow: hidden;
	box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

.agent-plan-header {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	padding: 0.5rem 0.75rem;
	font-size: 0.85rem;
	font-weight: 500;
	cursor: pointer;
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.agent-plan-content {
	padding: 0.75rem;
	border-top: 1px solid var(--claude-popover-border);
	max-height: 300px;
	overflow-y: auto;
	background-color: var(--claude-popover-bg);
}

/* Verbose Tool Output */
.tool-output-verbose {
	white-space: pre-wrap;
	word-break: break-word;
	overflow-wrap: break-word;
	font-family: var(--font-monospace);
	font-size: 0.8rem;
	background: var(--background-secondary);
	padding: 0.5rem;
	border-radius: var(--radius);
	max-height: 400px;
	overflow-y: auto;
	overflow-x: hidden;
	/* Prevent horizontal scroll */
}

.tool-output-header {
	font-weight: bold;
	margin-bottom: 0.25rem;
	color: var(--text-accent);
}

/* Hotkey Hints */
.agent-ai03-bottom-row {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 0.25rem 1.5rem 0.75rem 1.5rem;
	/* Reduced vertical padding */
	color: #9a9893;
	font-size: 0.7rem;
	width: 100%;
}

/* Approval & Diff Styling */
.agent-approval-inline {
	background: var(--claude-popover-bg);
	border: 1px solid var(--claude-popover-border);
	border-radius: var(--radius);
	padding: 1rem;
	margin: 1rem 0;
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
}

.agent-approval-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	font-weight: 600;
	color: var(--claude-assistant-text);
	font-size: 0.9rem;
}

.agent-approval-content {
	background: var(--claude-bg);
	padding: 0.75rem;
	border-radius: var(--radius);
	font-family: var(--font-monospace);
	font-size: 0.85rem;
	overflow-x: auto;
	max-height: 300px;
	color: var(--claude-assistant-text);
	border: 1px solid var(--claude-popover-border);
}

.agent-approval-actions {
	display: flex;
	gap: 0.5rem;
	justify-content: flex-end;
	margin-top: 0.5rem;
}

.agent-approval-hint {
	font-size: 0.75rem;
	color: var(--muted-foreground);
	align-self: center;
	margin-right: auto;
}

.btn-approve {
	background-color: var(--claude-send-btn);
	color: white;
	border: none;
	padding: 0.5rem 1rem;
	border-radius: var(--radius);
	cursor: pointer;
	font-size: 0.875rem;
	transition: background-color 0.2s;
}

.btn-approve:hover {
	background-color: var(--claude-send-btn-hover);
}

.btn-deny {
	background-color: hsl(var(--destructive));
	color: hsl(var(--destructive-foreground));
	border: none;
	padding: 0.5rem 1rem;
	border-radius: var(--radius);
	cursor: pointer;
	font-size: 0.875rem;
}

/* Diff View */
.diff-container {
	display: flex;
	flex-direction: column;
	gap: 0.75rem;
	font-family: var(--font-monospace);
	font-size: 0.85rem;
}

.diff-chunk {
	border: 1px solid var(--claude-popover-border);
	border-radius: var(--radius);
	overflow: hidden;
	background: var(--claude-bg);
}

.diff-header {
	background: var(--claude-popover-bg);
	padding: 0.5rem 0.75rem;
	font-size: 0.8rem;
	color: var(--claude-assistant-text);
	border-bottom: 1px solid var(--claude-popover-border);
	font-weight: 500;
}

.diff-content {
	padding: 0.75rem;
	white-space: pre-wrap;
	word-break: break-word;
}

.diff-remove {
	background-color: rgba(255, 0, 0, 0.1);
	color: #d32f2f;
	padding: 0.25rem 0.5rem;
	margin-bottom: 0.5rem;
	border-radius: 0.25rem;
	display: block;
}

.theme-dark .diff-remove {
	background-color: rgba(255, 0, 0, 0.15);
	color: #ef5350;
}

.diff-add {
	background-color: rgba(0, 255, 0, 0.1);
	color: #388e3c;
	padding: 0.25rem 0.5rem;
	border-radius: 0.25rem;
	display: block;
}

.theme-dark .diff-add {
	background-color: rgba(0, 255, 0, 0.15);
	color: #66bb6a;
}

/* Mobile Specific Styles */
.agent-chat-container.mobile {
	height: 100%;
	display: flex;
	flex-direction: column;
}

.agent-chat-container.mobile .agent-chat-messages {
	flex: 1;
	padding-bottom: 5rem;
}

.agent-chat-container.mobile .agent-input-wrapper {
	position: relative;
	bottom: auto;
	left: auto;
	right: auto;
	transform: none;
	padding: 0.5rem;
	background-color: var(--claude-bg);
	border-top: 1px solid var(--claude-popover-border);
	flex-shrink: 0;
}

.agent-ai03-container.mobile {
	padding: 0.5rem;
}

.agent-mobile-input-row {
	display: flex;
	align-items: center;
	gap: 0.5rem;
}

.agent-mobile-input-row .agent-ai03-textarea {
	flex: 1;
	min-height: 2.5rem;
	max-height: 6rem;
	padding: 0.5rem 0.75rem;
	background: var(--claude-input-bg);
	border: 1px solid var(--claude-popover-border);
	border-radius: 1.25rem;
}

.agent-mobile-input-row .agent-btn-send {
	flex-shrink: 0;
	width: 2.5rem;
	height: 2.5rem;
}